# 序

我最初进入大数据的世界的时候，它感觉是还只是软件开发领域的蛮荒之地（Wild West）：大量易于使用的关系型数据库被废弃，代之以有着数据模型被严格限制，被设计为可以在数千台机器上扩展的NoSQL数据库；NoSQL数据库越来越多，其中许多数据库仅仅有微小的不同；一个叫做`Hadoop`的新项目开始引起关注，它承诺可以提供深度分析巨量数据的能力。要搞清楚如何使用这些新工具非常令人困惑。

彼时，我正在试图解决在我当时的公司里所面临的扩展问题，架构复杂得令人生畏 — 那是一片由分片（sharded）的关系型数据库、查询（query）、工作机（workers）、上位机（master）和下位机（slave）所织成的网。数据库里满是错误，需要在应用中加入专用的代码来处理这些错误，下位机总是跟不上最新的更新。我决定研究一下非传统的大数据技术，看看当时是不是存在一个更好的设计我们的数据架构的方法。

一段发生在我软件工程职业生涯早期的经历深深地影响了我对于系统应该如何被架构的看法。我的一个同事已经花费了几星期的时间从Internet上搜集数据，并将数据放在一个共享的文件系统内，等搜集到足够多的数据，他就可以对它们进行分析。有一天在进行例行维护的时候，我不小心将该同事的数据全部删除了，直接把我同事的项目打回了几个星期前的状态。

我知道我犯下了大错，但作为一个新进软件工程师，我还不知道结果会发生什么。我会因为如此粗心大意而被炒鱿鱼吗？我给整个团队发送邮件，再三致歉。令我惊讶的是，大家都对此表示非常同情。我永远不能忘记一位同事来到我的桌边，拍着我的背说：“恭喜，你现在是个职业软件工程师了。”

他的玩笑之辞中深藏着软件开发中一个未被阐明的真理：我们不知道如何去制造完美的软件。软件缺陷可能（也确实被）部署在生产系统中，如果应用可以写数据库，那么有缺陷的软件也可以写数据库。当我开始重新设计我们的数据架构时，这一段经历对我影响深远，我知道新的架构不仅需要易于扩展、能够容错、方便理解，它还需要能够容忍人为错误。

重新设计此系统架构的经历导致我会质疑自己每一个关于数据库和数据管理的想法是否正确。我找到了一个基于不可变数据和批量计算的架构，并且被惊到了：这个新系统与仅仅基于增量计算的系统相比是多么的简单。一切（包括运维、给系统增加新功能、从人为错误中恢复和对性能进行优化）都变得简单了。这个方法非常通用，看上去好像可以用在任何数据系统上。

然而有些事情让我迷惑，当我环顾行业里的其他同行，我发现几乎没有人在使用类似的技术。取而代之的是使用基于庞大的增量更新的数据库集群的架构，由此导致了骇人的复杂度。而通过使用我开发的方法，在这些架构中如此多的复杂之处可以被完全避免，或是被大大减轻。

往后的几年里，我扩展了这个方法并将之正规化，我称之为“Lambda Architecture”。当在一个叫做BackType的初创公司工作时，我们一个五人团队构建了一个社交媒体分析产品，可以在大约100TB的数据上进行一系列不同的实时分析。我们这个小团队还做到了把这个系统在一个数百台机器组成的集群上进行部署、运维、和监控。当我们向人们展示我们的产品时，众人无不惊讶于我们团队只有五个人。人们总是问“这么一点儿人手怎么可能做那么多事呢？”，我的回答很简单：“重要的不是我们做什么，而是我们不做什么。”。通过使用Lambda Architecture，我们避免了传统架构沾染上的那些复杂度，通过避免这些复杂度，我们变得惊人的高效。

